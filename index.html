<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Crypto Signal Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.9em;
        }

        .input-section {
            margin-bottom: 30px;
        }

        label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 10px;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 14px;
            resize: vertical;
            min-height: 120px;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .example-hint {
            font-size: 0.85em;
            color: #888;
            margin-top: 5px;
            font-style: italic;
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result-section {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            background: #f8f9fa;
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .signal-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .buy-signal {
            background: #10b981;
            color: white;
        }

        .sell-signal {
            background: #ef4444;
            color: white;
        }

        .neutral-signal {
            background: #f59e0b;
            color: white;
        }

        .result-item {
            margin: 15px 0;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .result-label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }

        .result-value {
            color: #333;
            font-size: 1.1em;
        }

        .confidence-bar {
            width: 100%;
            height: 25px;
            background: #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 8px;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.85em;
        }

        .chart-container {
            margin-top: 20px;
            text-align: center;
        }

        canvas {
            max-width: 100%;
            border-radius: 10px;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .pattern-description {
            margin-top: 15px;
            padding: 15px;
            background: #eff6ff;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            font-size: 0.9em;
            color: #1e40af;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ AI Crypto Signal Analyzer</h1>
        <p class="subtitle">Paste your trading signal and let AI analyze the pattern</p>

        <div class="input-section">
            <label for="signalInput">Trading Signal:</label>
            <textarea 
                id="signalInput" 
                placeholder="Example: BTC/USDT long entry at 64200, resistance at 64500, support at 63800, bullish flag pattern forming, breakout expected, SL 64000, TP 65000"
            ></textarea>
            <p class="example-hint">Tip: Include keywords like "long", "short", "bullish", "bearish", pattern names, support/resistance levels</p>
        </div>

        <button onclick="analyzeSignal()">üîç Analyze Signal</button>

        <div id="resultSection" class="result-section">
            <div id="signalBadge"></div>
            
            <div class="result-item">
                <div class="result-label">Detected Pattern:</div>
                <div class="result-value" id="patternName"></div>
            </div>

            <div class="result-item">
                <div class="result-label">Confidence Level:</div>
                <div class="confidence-bar">
                    <div id="confidenceFill" class="confidence-fill">0%</div>
                </div>
            </div>

            <div class="result-item">
                <div class="result-label">Analysis Summary:</div>
                <div class="result-value" id="analysisSummary"></div>
            </div>

            <div id="patternDescription" class="pattern-description"></div>

            <div class="chart-container">
                <canvas id="patternChart" width="400" height="200"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Pattern Database with keywords and characteristics
        const patternDatabase = {
            // Bullish Continuation Patterns
            bullishFlag: {
                name: "Bullish Flag",
                type: "continuation",
                signal: "buy",
                keywords: ["flag", "bullish flag", "consolidation", "uptrend", "pole"],
                description: "A short consolidation after a strong upward move, suggesting continuation upward.",
                strength: 0.8
            },
            bullishPennant: {
                name: "Bullish Pennant",
                type: "continuation",
                signal: "buy",
                keywords: ["pennant", "bullish pennant", "triangle", "converging"],
                description: "Similar to a flag but with converging trendlines, indicating bullish continuation.",
                strength: 0.75
            },
            ascendingTriangle: {
                name: "Ascending Triangle",
                type: "continuation",
                signal: "buy",
                keywords: ["ascending triangle", "horizontal resistance", "higher lows"],
                description: "Flat top with rising support, typically breaks upward.",
                strength: 0.85
            },
            cupAndHandle: {
                name: "Cup with Handle",
                type: "continuation",
                signal: "buy",
                keywords: ["cup", "handle", "cup and handle", "rounded bottom"],
                description: "U-shaped pattern followed by slight consolidation, very bullish.",
                strength: 0.9
            },

            // Bearish Continuation Patterns
            bearishFlag: {
                name: "Bearish Flag",
                type: "continuation",
                signal: "sell",
                keywords: ["bearish flag", "downtrend", "bear flag", "consolidation down"],
                description: "Brief upward consolidation in a downtrend, suggesting further decline.",
                strength: 0.8
            },
            bearishPennant: {
                name: "Bearish Pennant",
                type: "continuation",
                signal: "sell",
                keywords: ["bearish pennant", "bear pennant", "converging down"],
                description: "Converging pattern in downtrend, indicating continued selling.",
                strength: 0.75
            },
            descendingTriangle: {
                name: "Descending Triangle",
                type: "continuation",
                signal: "sell",
                keywords: ["descending triangle", "horizontal support", "lower highs"],
                description: "Flat bottom with declining resistance, typically breaks downward.",
                strength: 0.85
            },

            // Bullish Reversal Patterns
            doubleBottom: {
                name: "Double Bottom",
                type: "reversal",
                signal: "buy",
                keywords: ["double bottom", "w pattern", "two bottoms", "reversal up"],
                description: "Two consecutive lows at similar levels, indicating bullish reversal.",
                strength: 0.85
            },
            tripleBottom: {
                name: "Triple Bottom",
                type: "reversal",
                signal: "buy",
                keywords: ["triple bottom", "three bottoms", "multiple support"],
                description: "Three lows at similar levels, strong bullish reversal signal.",
                strength: 0.9
            },
            invertedHeadAndShoulders: {
                name: "Inverted Head and Shoulders",
                type: "reversal",
                signal: "buy",
                keywords: ["inverted head and shoulders", "head shoulders bottom", "reverse head"],
                description: "Three troughs with middle being lowest, powerful bullish reversal.",
                strength: 0.95
            },
            fallingWedge: {
                name: "Falling Wedge",
                type: "reversal",
                signal: "buy",
                keywords: ["falling wedge", "wedge down", "converging lower"],
                description: "Converging trendlines sloping downward, bullish breakout expected.",
                strength: 0.8
            },

            // Bearish Reversal Patterns
            doubleTop: {
                name: "Double Top",
                type: "reversal",
                signal: "sell",
                keywords: ["double top", "m pattern", "two tops", "reversal down"],
                description: "Two consecutive highs at similar levels, indicating bearish reversal.",
                strength: 0.85
            },
            tripleTop: {
                name: "Triple Top",
                type: "reversal",
                signal: "sell",
                keywords: ["triple top", "three tops", "multiple resistance"],
                description: "Three highs at similar levels, strong bearish reversal signal.",
                strength: 0.9
            },
            headAndShoulders: {
                name: "Head and Shoulders",
                type: "reversal",
                signal: "sell",
                keywords: ["head and shoulders", "head shoulders top", "three peaks"],
                description: "Three peaks with middle being highest, powerful bearish reversal.",
                strength: 0.95
            },
            risingWedge: {
                name: "Rising Wedge",
                type: "reversal",
                signal: "sell",
                keywords: ["rising wedge", "wedge up", "converging higher"],
                description: "Converging trendlines sloping upward, bearish breakdown expected.",
                strength: 0.8
            },

            // Harmonic Patterns
            gartleyBullish: {
                name: "Gartley Pattern (Bullish)",
                type: "harmonic",
                signal: "buy",
                keywords: ["gartley", "harmonic", "fibonacci", "xabcd"],
                description: "Complex harmonic pattern with specific Fibonacci ratios, bullish reversal.",
                strength: 0.85
            },
            batPattern: {
                name: "Bat Pattern",
                type: "harmonic",
                signal: "buy",
                keywords: ["bat pattern", "bat", "harmonic bat"],
                description: "Harmonic pattern with precise ratios, indicates potential reversal.",
                strength: 0.8
            },
            butterflyPattern: {
                name: "Butterfly Pattern",
                type: "harmonic",
                signal: "buy",
                keywords: ["butterfly", "harmonic butterfly"],
                description: "Extended harmonic pattern suggesting strong reversal potential.",
                strength: 0.85
            }
        };

        // Keyword scoring system
        const bullishKeywords = [
            "long", "buy", "bullish", "uptrend", "higher high", "higher low",
            "support holding", "breakout", "breakthrough", "rally", "pump",
            "accumulation", "golden cross", "bounce", "recovery", "strength"
        ];

        const bearishKeywords = [
            "short", "sell", "bearish", "downtrend", "lower high", "lower low",
            "resistance rejection", "breakdown", "dump", "distribution", 
            "death cross", "rejection", "weakness", "decline", "crash"
        ];

        const neutralKeywords = [
            "sideways", "consolidation", "ranging", "neutral", "indecision",
            "symmetrical", "rectangle", "horizontal"
        ];

        function analyzeSignal() {
            const input = document.getElementById('signalInput').value.toLowerCase();
            
            if (!input.trim()) {
                alert('Please enter a trading signal to analyze.');
                return;
            }

            // Analyze the signal
            const analysis = performAnalysis(input);
            
            // Display results
            displayResults(analysis);
        }

        function performAnalysis(text) {
            let detectedPattern = null;
            let maxScore = 0;
            let patternMatches = [];

            // Check for pattern keywords
            for (const [key, pattern] of Object.entries(patternDatabase)) {
                let score = 0;
                let matchedKeywords = [];

                for (const keyword of pattern.keywords) {
                    if (text.includes(keyword)) {
                        score += 10;
                        matchedKeywords.push(keyword);
                    }
                }

                if (score > 0) {
                    patternMatches.push({
                        pattern: pattern,
                        score: score * pattern.strength,
                        keywords: matchedKeywords
                    });
                }
            }

            // Sort by score and get best match
            patternMatches.sort((a, b) => b.score - a.score);
            
            // Calculate sentiment scores
            let bullishScore = 0;
            let bearishScore = 0;

            for (const keyword of bullishKeywords) {
                if (text.includes(keyword)) bullishScore += 5;
            }

            for (const keyword of bearishKeywords) {
                if (text.includes(keyword)) bearishScore += 5;
            }

            // Determine final signal
            let finalSignal;
            let confidence;
            let summary;

            if (patternMatches.length > 0) {
                detectedPattern = patternMatches[0].pattern;
                finalSignal = detectedPattern.signal;
                
                // Combine pattern and sentiment
                const totalBullish = bullishScore + (finalSignal === 'buy' ? patternMatches[0].score : 0);
                const totalBearish = bearishScore + (finalSignal === 'sell' ? patternMatches[0].score : 0);
                
                confidence = Math.min(95, Math.round((Math.max(totalBullish, totalBearish) / (totalBullish + totalBearish + 1)) * 100));
                
                summary = `Pattern detected with ${patternMatches[0].keywords.join(', ')} indicators. ` +
                         `Bullish signals: ${bullishScore}, Bearish signals: ${bearishScore}.`;
            } else {
                // No pattern detected, use sentiment only
                if (bullishScore > bearishScore) {
                    finalSignal = 'buy';
                    confidence = Math.min(75, Math.round((bullishScore / (bullishScore + bearishScore + 1)) * 100));
                } else if (bearishScore > bullishScore) {
                    finalSignal = 'sell';
                    confidence = Math.min(75, Math.round((bearishScore / (bullishScore + bearishScore + 1)) * 100));
                } else {
                    finalSignal = 'neutral';
                    confidence = 50;
                }
                
                summary = `No specific pattern detected. Analysis based on sentiment: Bullish signals: ${bullishScore}, Bearish signals: ${bearishScore}.`;
            }

            return {
                signal: finalSignal,
                confidence: confidence,
                pattern: detectedPattern,
                summary: summary
            };
        }

        function displayResults(analysis) {
            const resultSection = document.getElementById('resultSection');
            const signalBadge = document.getElementById('signalBadge');
            const patternName = document.getElementById('patternName');
            const confidenceFill = document.getElementById('confidenceFill');
            const analysisSummary = document.getElementById('analysisSummary');
            const patternDescription = document.getElementById('patternDescription');

            // Show result section
            resultSection.style.display = 'block';

            // Set signal badge
            let badgeClass, badgeText;
            if (analysis.signal === 'buy') {
                badgeClass = 'buy-signal';
                badgeText = 'üìà BUY SIGNAL';
            } else if (analysis.signal === 'sell') {
                badgeClass = 'sell-signal';
                badgeText = 'üìâ SELL SIGNAL';
            } else {
                badgeClass = 'neutral-signal';
                badgeText = '‚ö†Ô∏è NEUTRAL SIGNAL';
            }
            signalBadge.className = 'signal-badge ' + badgeClass;
            signalBadge.textContent = badgeText;

            // Set pattern name
            patternName.textContent = analysis.pattern ? analysis.pattern.name : 'No specific pattern detected';

            // Animate confidence bar
            setTimeout(() => {
                confidenceFill.style.width = analysis.confidence + '%';
                confidenceFill.textContent = analysis.confidence + '%';
            }, 100);

            // Set summary
            analysisSummary.textContent = analysis.summary;

            // Set pattern description
            if (analysis.pattern) {
                patternDescription.textContent = 'üìä ' + analysis.pattern.description;
                patternDescription.style.display = 'block';
            } else {
                patternDescription.style.display = 'none';
            }

            // Draw chart
            drawPatternChart(analysis);
        }

        function drawPatternChart(analysis) {
            const canvas = document.getElementById('patternChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw based on signal type
            ctx.strokeStyle = analysis.signal === 'buy' ? '#10b981' : analysis.signal === 'sell' ? '#ef4444' : '#f59e0b';
            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            if (analysis.pattern) {
                drawSpecificPattern(ctx, analysis.pattern.name, canvas);
            } else {
                drawGenericTrend(ctx, analysis.signal, canvas);
            }
        }

        function drawSpecificPattern(ctx, patternName, canvas) {
            const w = canvas.width;
            const h = canvas.height;
            const centerY = h / 2;

            ctx.beginPath();

            if (patternName.includes('Flag')) {
                // Draw flag pattern
                ctx.moveTo(50, h - 30);
                ctx.lineTo(150, 30);
                ctx.lineTo(180, 50);
                ctx.lineTo(220, 40);
                ctx.lineTo(260, 55);
                ctx.lineTo(300, 45);
                ctx.lineTo(350, 20);
            } else if (patternName.includes('Triangle')) {
                // Draw triangle pattern
                ctx.moveTo(50, centerY + 40);
                ctx.lineTo(150, centerY - 40);
                ctx.lineTo(250, centerY + 30);
                ctx.lineTo(350, centerY);
            } else if (patternName.includes('Double Bottom')) {
                // Draw W pattern
                ctx.moveTo(50, 60);
                ctx.lineTo(100, h - 40);
                ctx.lineTo(150, 80);
                ctx.lineTo(250, h - 40);
                ctx.lineTo(300, 80);
                ctx.lineTo(350, 40);
            } else if (patternName.includes('Double Top')) {
                // Draw M pattern
                ctx.moveTo(50, h - 60);
                ctx.lineTo(100, 40);
                ctx.lineTo(150, h - 80);
                ctx.lineTo(250, 40);
                ctx.lineTo(300, h - 80);
                ctx.lineTo(350, h - 40);
            } else if (patternName.includes('Head and Shoulders')) {
                // Draw head and shoulders
                if (patternName.includes('Inverted')) {
                    ctx.moveTo(50, 50);
                    ctx.lineTo(100, h - 50);
                    ctx.lineTo(150, 70);
                    ctx.lineTo(200, h - 80);
                    ctx.lineTo(250, 70);
                    ctx.lineTo(300, h - 50);
                    ctx.lineTo(350, 50);
                } else {
                    ctx.moveTo(50, h - 50);
                    ctx.lineTo(100, 50);
                    ctx.lineTo(150, h - 70);
                    ctx.lineTo(200, 20);
                    ctx.lineTo(250, h - 70);
                    ctx.lineTo(300, 50);
                    ctx.lineTo(350, h - 50);
                }
            } else {
                drawGenericTrend(ctx, patternName.includes('Bullish') || patternName.includes('buy') ? 'buy' : 'sell', canvas);
                return;
            }

            ctx.stroke();
        }

        function drawGenericTrend(ctx, signal, canvas) {
            const w = canvas.width;
            const h = canvas.height;

            ctx.beginPath();
            
            if (signal === 'buy') {
                // Upward trend
                ctx.moveTo(50, h - 40);
                ctx.lineTo(100, h - 60);
                ctx.lineTo(150, h - 50);
                ctx.lineTo(200, h - 90);
                ctx.lineTo(250, h - 80);
                ctx.lineTo(300, h - 120);
                ctx.lineTo(350, h - 140);
            } else if (signal === 'sell') {
                // Downward trend
                ctx.moveTo(50, 40);
                ctx.lineTo(100, 60);
                ctx.lineTo(150, 50);
                ctx.lineTo(200, 90);
                ctx.lineTo(250, 80);
                ctx.lineTo(300, 120);
                ctx.lineTo(350, 140);
            } else {
                // Sideways
                ctx.moveTo(50, h / 2);
                ctx.lineTo(150, h / 2 - 20);
                ctx.lineTo(250, h / 2 + 20);
                ctx.lineTo(350, h / 2);
            }

            ctx.stroke();
        }
    </script>
</body>
</html>
